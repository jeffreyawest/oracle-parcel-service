<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html>
     <head>
        <script src="http://code.jquery.com/jquery-1.4.2.min.js"></script>
        <script src="js/datatable.js"></script>
        <script type="text/javascript" src="js/toggle.js"></script>
        <script>
            function trackfunction( td_inst){
               var di = td_inst.innerHTML; 
                $.get("/ops-rest/resources/parcel/" + di + "/log", {} ,
                function(response) { 
                    $("#parcel_table").replaceWith("<table id='parcel_table' border='1'><tr><td>Parcel ID</td><td>Event Date</td><td>Message</td><td>Location</td><td>Parcel Status</td></tr></table>");
                    $.each(response.ParcelEvent, function(index, event){
                        
                        $("#parcel_table").append(
                        "<tr><td>" +response.ParcelEvent[index].ParcelId +
                            "</td><td>" + response.ParcelEvent[index].EventDate +
                            "</td><td>" + response.ParcelEvent[index].Message +
                            "</td><td>" +response.ParcelEvent[index].Location + 
                            "</td><td>" + response.ParcelEvent[index].ParcelStatus + "</td></tr>");
                        
                        $("#parcel_output_wrapper").slideDown("slow");
                        
                    });
                },"json");
            }
            function testFun(){
                
                var id = $("#parcel_input").val(); //This id will be used with the REST back-end.
                //This id will be used with the REST back-end.
                
                $.get("/ops-rest/resources/parcel/" + id, {} ,
                function(Parcel) {
                    
                    
                    $.get("/ops-rest/resources/shipment/" + Parcel.ShipmentId, {} ,
                    function(response1) { 
                        $("#parcel_table1").replaceWith("<table id='parcel_table1' border='1'><tr><td>Parcel ID</td><td>Status</td><td>Contents</td><td>Weight</td><td> W * L * H</td></tr></table>");
                        $.each(response1.Parcel, function(index, event){
                            
                            $("#parcel_table1").append(
                            "<tr><td id='parcel_id' onclick='trackfunction(this)'>"+ response1.Parcel[index].Id +
                                "</td><td>" + response1.Parcel[index].ParcelStatus +
                                "</td><td>" + response1.Parcel[index].Contents +
                                "</td><td>" +response1.Parcel[index].Weight + 
                                "</td><td>" + response1.Parcel[index].Width + "*" + response1.Parcel[index].Length + "*" + response1.
                                Parcel[index].Height +"</td></tr>");
                            
                            $("#parcel_output_wrapper1").slideDown("slow");
                            
                        });
                    },"json");
                },
                "json");
                
                
                
                $.get("/ops-rest/resources/parcel/" + id + "/log", {} ,
                function(response) { 
                    $("#parcel_table").replaceWith("<table id='parcel_table' border='1'><tr><td>Parcel ID</td><td>Event Date</td><td>Message</td><td>Location</td><td>Parcel Status</td></tr></table>");
                    $.each(response.ParcelEvent, function(index, event){
                        
                        $("#parcel_table").append(
                        "<tr><td>" +response.ParcelEvent[index].ParcelId +
                            "</td><td>" + response.ParcelEvent[index].EventDate +
                            "</td><td>" + response.ParcelEvent[index].Message +
                            "</td><td>" +response.ParcelEvent[index].Location + 
                            "</td><td>" + response.ParcelEvent[index].ParcelStatus + "</td></tr>");
                        
                        $("#parcel_output_wrapper").slideDown("slow");
                        
                    });
                },"json");
            }
        
        
                                        
        </script>
    </head>
    <body style="width: 1024px;margin: auto;background-image:url('image/bg1.png');background-repeat: repeat-x;">
        <table width="100%">
            <tr>
                <td align="left">
                    <img src="image/logo.png" />
                </td>
                    
                <td align="right">
                    <img src="image/logo_weblogic12c_black.gif" style="width:127px;height: 42px;" />
                </td>
            </tr>
        </table>
        
        Enter Parcel ID :<input id="parcel_input"  name="test" type="text"  onchange="testFun()"/>
        <div id="parcel_output_wrapper1">
            <div id="parcel_table1"></div>
        </div>
        
        <div id="parcel_output_wrapper">
           <table id="parcel_table" border='1'>
            </table>
        </div>
        
    </body>
</html>
